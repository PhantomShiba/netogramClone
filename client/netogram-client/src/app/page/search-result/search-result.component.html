<app-navbar></app-navbar>

<div class="container">
  <router-outlet></router-outlet>
  <div class="body">
    <div class="search-result">
      <div>
        <button id="backButton" (click)="goBack()" mat-fab>
          <mat-icon>arrow_back</mat-icon>
        </button>
      </div>

      <h4>Search Results for "{{ searchTerm }}"</h4>

      <ng-container *ngIf="(isLoading$ | async) === false; else loading">
        <!-- Profile Results -->
        <h5>Everyone</h5>
        <div class="user-suggestions" *ngIf="(profiles$ | async)?.length">
          <mat-card *ngFor="let profile of profiles$ | async" class="user-card">
            <mat-card-content>
              <div class="user-item">
                <div class="user-info">
                  <img [src]="profile.avatarUrl" [alt]="profile.userName" class="user-avatar">
                  <div class="user-details">
                    <div class="user-name">{{ profile.userName }}</div>
                    <div class="user-bio">{{ profile.bio }}</div>
                  </div>
                </div>
                <button mat-flat-button class="add-friend-button">
                  <mat-icon>person_add_outlined</mat-icon>
                  Add friend
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div *ngIf="!(profiles$ | async)?.length">
          No profile results found for "{{ searchTerm }}"
        </div>

        <!-- Post Results -->
        <h5>Posts</h5>
        <ng-container *ngIf="(posts$ | async)?.length">
          <ng-container *ngFor="let post of posts$ | async">
            <app-post *ngIf="post.uid" [post]="post"></app-post>
          </ng-container>
        </ng-container>
        <div *ngIf="!(posts$ | async)?.length">
          No post results found for "{{ searchTerm }}"
        </div>
      </ng-container>

      <ng-template #loading>
        <div class="loading">
          Loading results...
        </div>
      </ng-template>
    </div>
  </div>
</div>
